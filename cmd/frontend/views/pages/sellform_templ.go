// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.857
package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func SellForm(categoryID string, categoryName string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"container my-5\"><div class=\"row justify-content-center\"><div class=\"col-md-10 col-lg-8\"><div class=\"card shadow border-0 rounded-4\"><div class=\"card-body p-4\"><h2 class=\"card-title text-center mb-4\">Adaugă un ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(categoryName)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/frontend/views/pages/sellform.templ`, Line: 9, Col: 88}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "</h2><div id=\"sell-error\"></div><form id=\"sellForm\" class=\"needs-validation\" novalidate onsubmit=\"return submitSellForm(event)\"><div class=\"row g-3\"><input type=\"hidden\" name=\"category_id\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(categoryID)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/frontend/views/pages/sellform.templ`, Line: 16, Col: 89}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\"> <input type=\"hidden\" name=\"device_type\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 string
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(categoryName)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/frontend/views/pages/sellform.templ`, Line: 17, Col: 91}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "\"><!-- Model --><div class=\"col-md-6\"><label for=\"model\" class=\"form-label\">Model</label> <input type=\"text\" class=\"form-control\" id=\"model\" name=\"model\" required><div class=\"invalid-feedback\">Modelul este necesar.</div></div><!-- Color --><div class=\"col-md-6\"><label for=\"color\" class=\"form-label\">Culoare</label> <input type=\"text\" class=\"form-control\" id=\"color\" name=\"color\"></div><!-- Storage -->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if categoryName != "casti" && categoryName != "airpods" {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<div class=\"col-md-6\"><label for=\"storage\" class=\"form-label\">Memorie</label> <input type=\"text\" class=\"form-control\" id=\"storage\" name=\"storage\"></div><div class=\"col-md-6\"><label for=\"battery_health\" class=\"form-label\">Sănătate Baterie</label> <input type=\"text\" class=\"form-control\" id=\"battery_health\" name=\"battery_health\"></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<!-- Processor + RAM pentru MacBook -->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if categoryName == "laptop" {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<div class=\"col-md-6\"><label for=\"processor\" class=\"form-label\">Procesor</label> <input type=\"text\" class=\"form-control\" id=\"processor\" name=\"processor\"></div><div class=\"col-md-6\"><label for=\"ram\" class=\"form-label\">RAM</label> <input type=\"text\" class=\"form-control\" id=\"ram\" name=\"ram\"></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<!-- Description --><div class=\"col-12\"><label for=\"description\" class=\"form-label\">Descriere</label> <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"3\" required></textarea><div class=\"invalid-feedback\">Descrierea este necesară.</div></div><!-- Submit Button --><div class=\"col-12 mt-4 text-center\"><button type=\"submit\" class=\"btn btn-success px-5 py-2\">Publică Produs</button></div></div></form></div></div></div></div><script>\n        function validateSellForm() {\n            const form = document.querySelector(\"#sellForm\");\n            let valid = form.checkValidity();\n            form.classList.add(\"was-validated\");\n            return valid;\n        }\n\n        function submitSellForm(event) {\n            event.preventDefault();\n            \n            if (!validateSellForm()) {\n                return false;\n            }\n            \n            const formData = {\n                category_id: document.querySelector(\"input[name='category_id']\").value,\n                device_type: document.querySelector(\"input[name='device_type']\").value,\n                model: document.getElementById(\"model\").value,\n                color: document.getElementById(\"color\").value,\n                storage: document.getElementById(\"storage\") ? document.getElementById(\"storage\").value : \"\",\n                battery_health: document.getElementById(\"battery_health\") ? document.getElementById(\"battery_health\").value : \"\",\n                processor: document.getElementById(\"processor\") ? document.getElementById(\"processor\").value : \"\",\n                ram: document.getElementById(\"ram\") ? document.getElementById(\"ram\").value : \"\",\n                description: document.getElementById(\"description\").value\n            };\n            \n            fetch('/api/products', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(formData),\n                credentials: 'same-origin'\n            })\n            .then(response => {\n                if (response.redirected) {\n                    window.location.href = response.url;\n                } else if (response.ok) {\n                    window.location.href = \"/\"; //\n                } else {\n                    return response.text().then(text => {\n                        document.getElementById(\"sell-error\").innerHTML = text;\n                    });\n                }\n            })\n            .catch(error => {\n                document.getElementById(\"sell-error\").innerHTML = \n                    '<div class=\"alert alert-danger\">A apărut o eroare de rețea. Încearcă din nou!</div>';\n            });\n            \n            return false;\n        }\n        </script></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
